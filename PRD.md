# PRD (Product Requirements Document) - 小規模宅地等の特例 判定アプリ

## 1. 目的・ゴール

*   **目的:** 相続税申告における小規模宅地等の特例が適用可能かどうかを、土地や建物の利用状況に関する段階的な質問に答えることで簡易的に判定するWebアプリケーションを提供する。
*   **ゴール:**
    *   利用者が特例適用の可能性を迅速かつ容易に把握できるようにする。
    *   相続税に関する情報収集の初期段階をサポートする。
    *   関連する特例の種類ごとの限度面積と減額割合を明確に提示する。

## 2. ターゲットユーザー

*   相続を控えている、または相続が発生した個人。
*   相続相談を受ける税理士、ファイナンシャルプランナー（FP）、弁護士などの専門家。
*   相続税について学習している学生や実務家。

## 3. 主要機能

*   **F1: 段階的フィルタリング選択:**
    *   ユーザーは以下の項目について、ドロップダウンリストから選択肢を選んでいく。
        1.  土地貸借 (例: 使用貸借, 自己使用, 賃貸借)
        2.  建物所有者 (例: 生計一親族, 被相続人, 特定同族会社)
        3.  建物使用者 (例: 生計一親族, 被相続人, 第三者)
        4.  建物貸借 (例: なし, 使用貸借, 賃貸借)
        5.  使用区分 (例: 居住用, 事業用, 貸付用, 用途不問)
    *   各ステップの選択肢は、前のステップの選択に基づいて動的にフィルタリングされる。
    *   前のステップが未選択の場合、次のステップのドロップダウンは非活性化される。
*   **F2: 判定結果表示:**
    *   すべてのフィルタリング項目が選択されると、条件に合致する「小規模宅地等の特例の種類」（例: 特定居住用, 特定事業用, 貸付事業用, 適用不可）が結果エリアに表示される。
    *   該当する特例が複数ある場合もすべて表示する。
    *   条件に合致する特例がない場合は、「適用不可」または明確に該当なしとわかるメッセージを表示する。
*   **F3: 補助情報表示:**
    *   主要な特例の種類ごとに定められた「限度面積」と「減額割合」の一覧表を、画面上に常に表示する。
*   **F4: クリア（リセット）機能:**
    *   「クリアボタン」をクリックすると、すべての選択項目がリセットされ、初期状態に戻る。

## 4. データ要件

*   **D1: 判定ルールデータ:**
    *   土地貸借、建物所有者、使用者、建物貸借、使用区分の組み合わせと、それに対応する特例の種類、限度面積、減額割合を含むマスターデータ。（提供されたCSVファイル`land_data.csv`相当）
    *   このデータはアプリケーション内で静的に保持される。
*   **D2: 補助情報データ:**
    *   特例の種類、限度面積、減額割合の対応表データ。（提供されたCSVファイル`reference_data.csv`相当）
    *   このデータもアプリケーション内で静的に保持される。

## 5. UI/UX要件

*   **UI1:** クリーンで直感的なデザインを採用し、ユーザーが迷わず操作できるようにする。
*   **UI2:** 各選択肢のラベル（例：「土地貸借」）を明確に表示する。
*   **UI3:** 選択肢のドロップダウンは、視覚的に選択されている状態と非活性状態が区別できるようにする。
*   **UX1:** 選択プロセスはスムーズで、ステップ間の依存関係（前の選択が次の選択肢を決定する）がユーザーに自然に伝わるようにする。
*   **UX2:** 結果表示は明確で、適用される特例が一目でわかるようにする。
*   **UX3:** クリアボタンはアクセスしやすい位置に配置する。

## 6. 非機能要件

*   **NF1: パフォーマンス:** 選択肢の変更に対する画面の応答は高速であること（特にフィルタリング処理）。
*   **NF2: ブラウザ互換性:** 主要なモダンブラウザ（Chrome, Firefox, Safari, Edgeの最新版）で動作すること。
*   **NF3: レスポンシブ:** デスクトップおよびモバイルデバイスで適切に表示・操作できること。

## 7. 将来的な拡張（任意）

*   入力内容に基づいた概算減税額のシミュレーション機能。
*   関連法規や解説へのリンク表示。
*   入力内容の保存・読み込み機能。 